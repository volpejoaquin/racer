<div class="" *ngIf="trackActivity && trackActivity.race_participant" racerRaceParticipant [raceParticipant]="trackActivity.race_participant">
  <div id="header">
    <span class="text-normal">{{ trackActivity.race_participant?.number }}</span>
    <span class="text-uppercase"> {{ trackActivity.race_participant?.driver?.last_name }}</span>
    <span class="text-normal pr-2 mr-2"> {{ trackActivity.race_participant?.driver?.name }}</span>
    <small class="border-right border-left pl-2 ml-2 pr-2 mr-2 text-muted" [ngPlural]="trackActivity.laps_count">
      <ng-template ngPluralCase="=0">Primera vuelta</ng-template>
      <ng-template ngPluralCase="=1">Vuelta {{ trackActivity.laps_count }}</ng-template>
      <ng-template ngPluralCase="other">{{ trackActivity.laps_count }} vueltas</ng-template>
    </small>
    <small class="text-muted">{{ title }} posici√≥n</small>
  </div>

  <table class="table table-striped table-sm racer_table partials-per-lap_table">
    <thead>
      <tr>
        <!-- <th scope="col">P</th> --> <!-- TODO: Add position reference for that lap -->
        <th scope="col" class="timing_table-head-column timing_table-column-pos">V</th>
        <th scope="col" class="timing_table-head-column timing_table-column-lap-sector">S1</th>
        <th scope="col" class="timing_table-head-column timing_table-column-lap-sector">S2</th>
        <th scope="col" class="timing_table-head-column timing_table-column-lap-sector">S3</th>
        <th scope="col" class="timing_table-head-column timing_table-column-lap-sector">S4</th>
        <th scope="col" class="timing_table-head-column timing_table-column-lap-time">TIEMPO</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let lap of trackActivity.laps; let lapIndex = index;">
        <td class="timing_table-column-pos">
          <span class="align-middle" [class.text-info]="trackActivity.best_lap?.time && lap.time === trackActivity.best_lap?.time">
            {{ lapIndex + 1 }}
          </span>
        </td>
        <td class="timing_table-column-lap-sector">
          <racer-partial-lap-time [partial]="getPartial(lap, 0)" [bestPartial]="getBestPartial(lap, 0)" [polePartial]="getPolePartial(0)" [isRefLap]="false"></racer-partial-lap-time>
        </td>
        <td class="timing_table-column-lap-sector">
          <racer-partial-lap-time [partial]="getPartial(lap, 1)" [bestPartial]="getBestPartial(lap, 1)" [polePartial]="getPolePartial(1)" [isRefLap]="false"></racer-partial-lap-time>
        </td>
        <td class="timing_table-column-lap-sector">
            <racer-partial-lap-time [partial]="getPartial(lap, 2)" [bestPartial]="getBestPartial(lap, 2)" [polePartial]="getPolePartial(2)" [isRefLap]="false"></racer-partial-lap-time>
        </td>
        <td class="timing_table-column-lap-sector">
          <racer-partial-lap-time [partial]="getPartial(lap, 3)" [bestPartial]="getBestPartial(lap, 3)" [polePartial]="getPolePartial(3)" [isRefLap]="false"></racer-partial-lap-time>
        </td>
        <td class="timing_table-column-partial-lap-time">
          <racer-lap-time [lap]="getLap(lap)" [bestLap]="getBestLap()" [poleLap]="getPoleLap()" [isRefLap]="false"></racer-lap-time>
        </td>
      </tr>
    </tbody>
  </table>
</div>
